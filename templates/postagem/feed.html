{% extends "base.html" %}

{% block conteudo %}

<div class="container">

  <div class="row">

    <div class="col-md-4 border-end">
      <div class="sticky-top pt-5 z-0">

        <div>
          <h4>Meu Perfil</h4>
        </div>
        <div class="d-flex align-items-center p-2" style="text-decoration: none;">
          <div class="d-flex flex-row align-items-center">
            {% if not usuario.admin %}
            <img src="/static/imagens/usuarios/{{ usuario.id|id_img }}.jpg" class="d-flex align-self-center me-3" width="60" alt="Imagem do usuário {{ usuario.nome }}" style="border-radius: 50%;">
            {% else %}
            <img src="/static/imagens/perfil_verde.svg" class="d-flex align-self-center me-3" width="60" alt="Imagem do usuário {{ usuario.nome }}" style="border-radius: 50%;">
            {% endif %}
            <span class="badge bg-success badge-dot"></span>
          </div>
          <div class="d-flex justify-content-between w-100">
            <a href="/configuracoes" class="text-decoration-none text-black fs-5 fw-bold">
              <div class="pt-1">
                <button type="button" class="btn border-0 fs-3" disabled>{{ usuario.nome }}</button>
              </div>
            </a>
            <div><a href="/cupons">
                <img src="static/imagens/cupom.svg" style="width: 1.3rem;"></a>
              <a href="/configuracoes">
                <img src="static/imagens/configuracao.svg" style="width: 1.3rem;"></a>
            </div>
          </div>
        </div>
        <div class="row border rounded mt-3 me-1 ms-1">
          <div class="col-4 mt-2 mb-2">
            <div class="text-center">10</div>
            <div class="text-center">Seguindo</div>
          </div>
          <div class="col-4 mt-2 mb-2">
            <div class="text-center">250</div>
            <div class="text-center">Seguidores</div>
          </div>
          <div class="col-4 mt-2 mb-2">
            <div class="text-center">4</div>
            <div class="text-center">Publicações</div>
          </div>
        </div>

        <div class="p-4">
        </div>


        <div>
          <h4>Seguindo</h4>
        </div>
        <ul class="list-unstyled mb-0">
          <li class="p-2 border-bottom">
            <div class="d-flex justify-content-between align-items-center" style="text-decoration: none;">
              <div class="d-flex flex-row align-items-center">
                <div>
                  <img src="static/imagens/rosto1.jpg" alt="avatar" class="d-flex align-self-center me-3" width="60">
                  <span class="badge bg-success badge-dot"></span>
                </div>
                <div class="pt-1">
                  <p class="fw-bold mb-0 fs-5">Carlos Souza</p>
                </div>
              </div>
              <a href="#" class="btn btn-link text-decoration-none fs-5">Deixar de seguir</a>
            </div>
          </li>

          <li class="p-2 border-bottom">
            <div class="d-flex justify-content-between align-items-center" style="text-decoration: none;">
              <div class="d-flex flex-row align-items-center">
                <div>
                  <img src="static/imagens/rosto4.jpg" alt="avatar" class="d-flex align-self-center me-3" width="60">
                  <span class="badge bg-success badge-dot"></span>
                </div>
                <div class="pt-1">
                  <p class="fw-bold mb-0 fs-5">Felipe Oliveira</p>
                </div>
              </div>
              <a href="#" class="btn btn-link text-decoration-none fs-5">Deixar de seguir</a>
            </div>
          </li>
        </ul>
        <div class="p-4"></div>
        <div>
          <h4>Solicitações para seguir</h4>
        </div>
        <ul class="list-unstyled mb-0">
          <li class="p-2 border-bottom">
            <div class="d-flex justify-content-between align-items-center" style="text-decoration: none;">
              <div class="d-flex flex-row align-items-center">
                <div>
                  <img src="static/imagens/rosto3.jpg" alt="avatar" class="d-flex align-self-center me-3" width="60">
                  <span class="badge bg-success badge-dot"></span>
                </div>
                <div class="pt-1">
                  <p class="fw-bold mb-0 fs-5">Elisa Saito</p>
                </div>
              </div>
              <div>
                <a href="#" class="btn btn-link text-decoration-none fs-5">Seguir</a>
                <label><img src="static/imagens/lixeira.svg" alt="Excluir" style="height: 1.3rem;"></label>
              </div>
            </div>
          </li>

          <li class="p-2 border-bottom">
            <div class="d-flex justify-content-between align-items-center" style="text-decoration: none;">
              <div class="d-flex flex-row align-items-center">
                <div>
                  <img src="static/imagens/rosto2.jpg" alt="avatar" class="d-flex align-self-center me-3" width="60">
                  <span class="badge bg-success badge-dot"></span>
                </div>
                <div class="pt-1">
                  <p class="fw-bold mb-0 fs-5">Jonas Ribeiro</p>
                </div>
              </div>
              <div>
                <a href="#" class="btn btn-link text-decoration-none fs-5">Seguir</a>
                <label type="reset"><img src="static/imagens/lixeira.svg" alt="Excluir" style="height: 1.3rem;"></label>
              </div>
            </div>
          </li>
        </ul>
      </div>
    </div>


    <div class="col-md-8 d-flex justify-content-center">
      <div class="d-flex flex-column align-items-center">

        <div class="card mb-3 border-info border-2 w-100">
          <div class="card-header bg-white d-flex align-items-center">
            {% if not usuario.admin %}
            <img src="/static/imagens/usuarios/{{ usuario.id|id_img }}.jpg" class="d-flex align-self-center me-3" width="60" alt="Imagem do usuário {{ usuario.nome }}" style="border-radius: 50%;">
            {% else %}
            <img src="/static/imagens/perfil_verde.svg" class="d-flex align-self-center me-3" width="60" alt="Imagem do usuário {{ usuario.nome }}" style="border-radius: 50%;">
            {% endif %}            
          <button type="button" class="btn border-0 fs-5" disabled>{{ usuario.nome }}</button>

          </div>
          <form method="post" enctype="multipart/form-data">
            <div class="card-body">
              <textarea class="form-control fs-5" placeholder="Compartilhe suas experiências..." name="conteudo" id="conteudo" rows="3"></textarea>
              <input type="file" class="form-control" style="display: none;" id="inputGroupFile02" id="arquivoImagem" name="arquivoImagem" onchange="previewImage(event)" accept="image/jpeg" required>
              <!-- LOCAL PARA MOSTRAR IMAGEM SELECIONADA -->
              <div class="col-3">
                <img id="preview" src="" class="border border-2 rounded rounded-3 p-2 w-100 d-none" />
              </div>
              <!-- ------------------------------------- -->
              <div class="d-flex justify-content-between">
                <label for="inputGroupFile02">
                  <p class="fs-3"><i class="bi bi-cloud-upload text-dark" alt="Imagem da Receita"></i>
                    <a href='/minhasPostagens'><button id="btnSalvar" class=" btn btn-primary text-white mt-2 mb-2" type="submit" style="width: 100px;">Postar</button></a>
              </div>
            </div>
          </form>
        </div>

        {% for p in postagens: %}
        <div class="card mb-3 border-info border-2 w-80">
          <div class="card-header bg-white d-flex align-items-center">
            <!-- <img src="static/imagens/perfil.svg" alt="Foto de Perfil" class="rounded-circle me-2" style="width: 3rem;"> -->  
            {% if p.usuario!=usuario.admin %}
            <img src="/static/imagens/usuarios/{{ p.usuario|id_img }}.jpg" class="d-flex align-self-center me-3" width="60" alt="Imagem do usuário {{ usuario.nome }}" style="border-radius: 50%;">
            {% else %}
            <img src="/static/imagens/perfil_verde.svg" class="d-flex align-self-center me-3" width="60" alt="Imagem do usuário {{ usuario.nome }}" style="border-radius: 50%;">
            {% endif %}
            <span class="flex-grow-1 fs-5">{{ p.nome_autor }}</span>
            <button class="btn btn-primary btn-sm text-white">Seguir</button>
          </div>
          <img style="width: 40rem; height: 30rem;" src="/static/imagens/postagens/{{ p.id|id_img }}.jpg" alt="Imagem da Postagem">
          <div class="card-body">
            <div class="d-flex justify-content-between">
              <div>
                <label type="submit">
                  <p style="font-size: 1.5rem;"><i class="bi bi-send" alt='Compartilhar'></i></p>
                </label>
                <label type="submit">
                  <p style="font-size: 1.5rem;"><i class="bi bi-heart text-dark" alt='Curtir'></i></p>
                </label>
                <label type="submit">
                  <p style="font-size: 1.5rem;"><i class="bi bi-hand-thumbs-down text-dark" alt='Dislike'></i></p>
                </label>
                <label><a href="/comentarioPostagem">
                    <p style="font-size: 1.5rem;"><i class="bi bi-chat text-dark" alt='Comentários'></i></p>
                  </a></label>
              </div>
              <label type="submit"><img src="static/imagens/salvar.svg" style="height: 1.5rem;"></label>
            </div>
            <p class="card-text fs-5">{{ p.conteudo }}</p>
          </div>
        </div>        
        {% endfor %}
        
      </div>
    </div>
  </div>
</div>

<!-- SCRIPT PARA MOSTRAR IMAGEM SELECIONADA -->
<script>
  function previewImage(event) {
    var reader = new FileReader();
    reader.onload = function () {
        var preview = document.getElementById('preview');
        preview.src = reader.result;
        preview.classList.remove('d-none');
    };
    reader.readAsDataURL(event.target.files[0]);
  }
  </script>

{% endblock %}